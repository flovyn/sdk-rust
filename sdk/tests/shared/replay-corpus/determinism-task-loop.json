{
  "name": "determinism-task-loop",
  "description": "Tasks in a loop - tests sequence-based replay with multiple tasks of the same type",
  "workflow_execution_id": "aaaa0000-0000-0000-0000-000000000001",
  "tenant_id": "00000000-0000-0000-0000-000000000001",
  "workflow_kind": "task-loop-workflow",
  "input": {
    "items": ["item-1", "item-2", "item-3"]
  },
  "events": [
    {
      "sequence_number": 1,
      "event_type": "WorkflowStarted",
      "data": {
        "input": { "items": ["item-1", "item-2", "item-3"] }
      }
    },
    {
      "sequence_number": 2,
      "event_type": "TaskScheduled",
      "data": {
        "taskType": "process-item",
        "taskExecutionId": "11111111-1111-1111-1111-000000000001",
        "input": { "item": "item-1" }
      }
    },
    {
      "sequence_number": 3,
      "event_type": "TaskCompleted",
      "data": {
        "taskExecutionId": "11111111-1111-1111-1111-000000000001",
        "result": { "processed": "item-1" }
      }
    },
    {
      "sequence_number": 4,
      "event_type": "TaskScheduled",
      "data": {
        "taskType": "process-item",
        "taskExecutionId": "11111111-1111-1111-1111-000000000002",
        "input": { "item": "item-2" }
      }
    },
    {
      "sequence_number": 5,
      "event_type": "TaskCompleted",
      "data": {
        "taskExecutionId": "11111111-1111-1111-1111-000000000002",
        "result": { "processed": "item-2" }
      }
    },
    {
      "sequence_number": 6,
      "event_type": "TaskScheduled",
      "data": {
        "taskType": "process-item",
        "taskExecutionId": "11111111-1111-1111-1111-000000000003",
        "input": { "item": "item-3" }
      }
    },
    {
      "sequence_number": 7,
      "event_type": "TaskCompleted",
      "data": {
        "taskExecutionId": "11111111-1111-1111-1111-000000000003",
        "result": { "processed": "item-3" }
      }
    },
    {
      "sequence_number": 8,
      "event_type": "WorkflowCompleted",
      "data": {
        "output": { "results": ["item-1", "item-2", "item-3"] }
      }
    }
  ],
  "expected_commands": [
    { "type": "ScheduleTask", "taskType": "process-item" },
    { "type": "ScheduleTask", "taskType": "process-item" },
    { "type": "ScheduleTask", "taskType": "process-item" },
    { "type": "CompleteWorkflow" }
  ],
  "determinism_test": {
    "type": "valid_replay",
    "description": "Multiple tasks of same type should match by per-type sequence order"
  }
}
